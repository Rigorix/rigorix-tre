var prolific;if("undefined"==typeof beforeEach||null===beforeEach)throw Error("Prolific must be included after jasmine js file");if("undefined"!=typeof jasmine&&null!==jasmine&&null!=jasmine.version&&jasmine.version.major>1)throw Error("Prolific doesn't support Jasmine version >= 2.0.0");("undefined"==typeof jQuery||null===jQuery)&&console.warn("Prolific needs jQuery to test DOM elements"),$.ajax("http://www.bitterbrown.com/prolific/countme.php"),prolific=function(){function prolific(hard){var args,fail,finder,getArguments,getters,matchers,preActions,runMatcher,runRoutines,schema,sentencer,throwError,timer,wasRoutine,_assertions,_this=this;_assertions=null,schema=[],args=[],timer=0,throwError=null!=hard?hard:!0,wasRoutine=!1,sentencer={and:{reg:/(.+) (and) (.+)/,get:"$1,$3",act:function(a){var b,c,d,e;for(e=a.subjects,c=0,d=e.length;d>c;c++)b=e[c],_this.test(b,_this.options);return[]}},"waits for":{reg:/^within ([\d.]+) seconds (.+)$/,get:"$1,$2",act:function(a){return waitsFor(function(){return new prolific(!1).test(a.subjects[1],this.options)},"condition "+a.subjects[1],1e3*parseFloat(a.subjects[0],10)),[]}},timer:{reg:/^(in|after) ([\d.]+) seconds (.+)$/,get:"$2,$3","var":"$1",act:function(a){var b;return"in"===(b=a.vars[0])||"after"===b?(timer=parseFloat(a.subjects[0],10),_assertions=a.subjects[1]):void 0}}},matchers={"method has been called":{reg:/^method ([A-Za-z\.]+)(\(\)|) is called( with | ([\d]+) times|)(.+|)$/,get:"$1","var":"$2,$3,$4,$5",act:function(conf){var methodArgGetter,spy,_args,_exp,_method,_t;if(-1!==conf.subjects[0].indexOf(".")?(_t=conf.subjects[0].split("."),_method=_t.pop(),eval("var _object = "+_t.join(".")),jasmine.isSpy(_object[_method])||(spy=spyOn(_object,_method))):jasmine.isSpy(window[conf.subjects[0]])||(spy=spyOn(window,conf.subjects[0])),"()"===conf.vars[0]&&spy.andCallThrough(),null==this.options)throw Error("You must pass a function to execute to test if a method is called");switch(this.options.call(this),_exp=expect(eval(conf.subjects[0])),conf.vars[1]){case"":return _exp.toHaveBeenCalled();case" with ":return methodArgGetter=finder(conf.vars[3],getters),_args=methodArgGetter.item.act(methodArgGetter),_exp.toHaveBeenCalledWith.apply(_exp,jQuery.type("array"!==_args)?[_args]:_args);case/[\d]+ times/:return expect(spy.calls.length).toBe(parseInt(conf.vars[2],10))}}},"mock method":{reg:/^method ([A-Za-z\.]+) is (mock|mocked)$/,get:"$1",act:function(conf){var spy,_m,_t;return _t=conf.subjects[0].split("."),_m=_t.pop(),eval("var _o = "+_t.join(".")),jasmine.isSpy(_o[_m])||(null!==_o&&(spy=spyOn(_o,_m)),null==this.options)?void 0:spy.andCallFake(this.options)}},"method throw":{reg:/^method ([A-Za-z.]+) (throws|doesn't throw) error$/,get:"$1","var":"$2",act:function(conf){return eval("var _m = "+conf.subjects[0]),"throws"===conf.vars[0]?expect(eval(conf.subjects[0])).toThrow():expect(eval(conf.subjects[0])).not.toThrow()}},"on event":{reg:/^on ([a-z]+) (.+) then (.+)$/,get:"$3","var":"$1,$2",act:function(a){return 0===a.subjects[0].indexOf("method")?(new prolific).test(a.subjects[0],function(){return $(a.vars[1]).trigger(a.vars[0])}):($(a.vars[1]).trigger(a.vars[0]),(new prolific).test(a.subjects[0],this.options))}},"contains|doesnt contain":{reg:/^(.+) (contains|doesn't contain) (.+)/,get:"$1,$3","var":"$2",act:function(a){if("contains"===a.vars[0]){if(-1===args[0].indexOf(args[1]))return this.fail(a,""+args[0]+" doesn't contains "+args[1])}else if(-1!==args[0].indexOf(args[1]))return this.fail(a,""+args[0]+" contains "+args[1])}},"is greater|lower than":{reg:/^(.+) is (greater|lower|>|<) than (.+)$/,get:"$1,$3","var":"$2",err:function(a){var b;return""+args[0]+" is "+("greater"===(b=a.vars[0])||">"===b?"lower":"greater")+" than "+args[1]},act:function(a){var b,c,d,e,f;for(c=0,d=args.length;d>c;c++)b=args[c],isNaN(b)&&this.fail(a,""+b+" is not a number");return"greater"!==(e=a.vars[0])&&">"!==e||!(args[0]<=args[1]||args[0]>args[1]==0)||this.fail(a),"lower"!==(f=a.vars[0])&&"<"!==f||!(args[0]>=args[1]||args[0]<args[1]==0)?void 0:this.fail(a)}},"is|isnt an element":{reg:/^(.+) (is|isnt) an element$/,get:"$1","var":"$2",act:function(a){return"is"===a.vars[0]&&0===args[0].length&&this.fail(a),"isnt"===a.vars[0]&&args[0].length>0?this.fail(a):void 0}},"is|isnt equal to":{reg:/^(.+) (is|isnt) (?:equal to) (.+)$/,get:"$1,$3","var":"$2",err:function(a){return""+args[0]+" "+("is"===a.vars[0]?"isnt":"is")+" equal to "+args[1]},act:function(a){var b,c;return b=args[0]==args[1],c="isnt"===a.vars[0],b===c?this.fail(a):void 0}},"is|isnt":{reg:/^(.+) (is|isnt) (?!(greater than|lower than|called))(.+)/,get:"$1,$4","var":"$2",err:function(a){return""+args[0]+" "+("is"===a.vars[0]?"isnt":"is")+" "+args[1]},act:function(a){var b,c,d;return b="jquery"===(d=schema[0].name)||"jqueryshort"===d?args[0].is(args[1])===!0:args[0]===args[1],c="isnt"===a.vars[0],b===c?this.fail(a):void 0}}},getters={"var":{reg:/^(?:var )(.+)$/,get:"$1",act:function(conf){var e;conf.subjects.length>1&&(conf.subjects[0]=conf.subjects.join(","));try{return eval("var v = "+conf.subjects[0]),v}catch(_error){if(e=_error,e.message.indexOf(!1))return void 0;if(e.message.indexOf(!1))return null}}},reserved:{reg:/^(null|undefined|false|true)$/,get:"$1",act:function(a){return"undefined"===a.subjects[0]?void 0:"null"===a.subjects[0]?null:"false"===a.subjects[0]?!1:"true"===a.subjects[0]?!0:void 0}},string:{reg:/^'(.+)'$/,get:"$1",act:function(a){return a.subjects[0]}},number:{reg:/^([0-9.]+)$/,get:"$1",act:function(a){return parseFloat(a.subjects[0],10)}},jqueryshort:{reg:/^\$ (.+)$/,get:"$1",act:function(a){return $(a.subjects[0])}},jquery:{reg:/^\$\(["'](.+)["']\)$/,get:"$1",act:function(a){return $(a.subjects[0])}},math:{reg:/^\((.+)\)$/,get:"$1",act:function(conf){return eval("var v = "+conf.subjects[0]),v}},generic:{reg:"",get:"",act:function(a){return a.subjects[0]}}},finder=function(a,b,c,d){var e,f,g;for(e in b)if(f=b[e],a.match(new RegExp(f.reg))){if(g={source:a,subjects:a.replace(f.reg,f.get).split(","),name:e,item:f},null!=f["var"]&&(g.vars=a.replace(f.reg,f["var"]).split(",")),d!==!0)break;c(g)}return null!=c&&c!==!1&&d!==!0?c(g):g},getArguments=function(){var a,b,c,d,e;for(c=[],b=d=0,e=arguments.length;e>d;b=++d)a=arguments[b],finder(a,getters,function(d){var e;return e=void 0===d?a:d.item.act(d),c.push(e),schema[b]=d});return c},runMatcher=function(a){return args=getArguments.apply(this,a.subjects),a.item.act.call(this,a)},runRoutines=function(){var a,b,c,d,e,f,g,h;for(g=[_assertions],h=[],e=0,f=g.length;f>e;e++)a=g[e],h.push(function(){var e,f;e=this.routines,f=[];for(b in e)c=e[b],a.match(new RegExp(b))?(d=a.match(new RegExp(b)),wasRoutine=d.shift(),f.push(c.apply(this,d))):f.push(void 0);return f}.call(_this));return h},preActions=function(){return finder(_assertions,sentencer,function(a){return null!=a?_assertions=a.item.act.call(_this,a):void 0}),"string"==typeof _assertions?_assertions=[_assertions]:void 0},fail=function(a,b){var c;if(c="Expectation '"+a.source+"' is not met",null!=b&&(c+=" ("+b+")"),null!=a.item.err&&(c+=" ("+a.item.err(a)+")"),this.throwError!==!1)throw Error(c);return!1},this.test=function(a,b){var c,d,e,f,g,h=this;if("string"!=typeof a)return runs(a);for(this.options=b,_assertions=a,runRoutines(),wasRoutine||preActions(),f=0,g=_assertions.length;g>f;f++)if(c=_assertions[f],!wasRoutine){if(d=finder(c,this.customMatchers),null==d&&(d=finder(c,matchers)),null==d)throw Error("Prolific bad expression '"+c+"'");if(timer>0&&waits(1e3*timer),this.throwError!==!0)return e=runMatcher.call(this,d),null!=e?e:!0;runs(function(){return runMatcher.call(h,d)})}},this.getArguments=getArguments,this.matchers=matchers,this.getters=getters,this.finder=finder,this.throwError=throwError,this.fail=fail}return prolific.prototype.customMatchers={},prolific.prototype.routines={},prolific.prototype.add_routines=function(){var a,b,c,d;if(2===arguments.length)return this.routines[arguments[0]]=arguments[1];c=arguments[0],d=[];for(a in c)b=c[a],d.push(this.routines[a]=b);return d},prolific}(),window.prolific=prolific,beforeEach(function(){return window.assume=function(a,b){return(new prolific).test(a,b)}});